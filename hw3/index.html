<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      h1 {
        text-align: center;
      }

      .container {
        margin: 0 auto;
        padding: 60px 20%;
      }

      figure {
        text-align: center;
      }

      img {
        display: inline-block;
      }

      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>CS184/284A Spring 2025 Homework 3 Write-Up</h1>
      <div style="text-align: center">Names: Soren & Albert</div>

      <br />

      Link to webpage:
      <a
        href="https://cal-cs184-student.github.io/hw-webpages-o-o-webpage/hw3/index.html"
        >Webpage</a
      >
      Link to GitHub repository:
      <a href="https://github.com/cal-cs184-student/sp25-hw3-o_o.git"
        >cs184.eecs.berkeley.edu/sp25</a
      >

      <figure>
        <img
          src="cornell.png"
          alt="Cornell Boxes with Bunnies"
          style="width: 70%"
        />
        <figcaption>Welcome</figcaption>
      </figure>

      <!--
		We've already added one heading per part, to make your write-up as navigable when grading. Please fit your write-up within these sections!
		-->

      <h2>Overview</h2>
      This has been the most challenging homework assignment so far. I learned a
      lot about ray generation, BVH, direct and indirect illumination, and
      adaptive sampling. I would say the most difficult part was global
      illumination. The idea of indirect light bounces is interesting, but it's
      also hard to debug. I also practiced debugging techniques, such as using
      print statements and changing the -m -r parameters to observe differences.

      <h2>Part 1: Ray Generation and Scene Intersection</h2>
      For ray generation, convert hFov and vFov from degrees to radians. Then,
      calculate the sensor position (x, y, -1) using the formula -tan(fov / 2) +
      2 * tan(fov / 2) * x. Next, compute the ray direction starting from the
      camera origin. Convert this direction from camera space to world space,
      and normalize it. The ray is defined with the camera origin as its
      starting point and the normalized world-space direction as its direction.
      The ray is only valid between nClip and fClip, which correspond to min_t
      and max_t, respectively. To render each pixel, we sample ns_aa samples
      from gridSampler. For each sample, we generate a camera ray and estimate
      its global radiance. By averaging the global radiance across all samples,
      we update the sample buffer accordingly. The Moller–Trumbore algorithm is
      used to compute ray-triangle intersections. Calculate vectors E1, E2, S,
      S1, and S2 as required. If the dot product S1 • E1 equals zero, there is
      no intersection. Otherwise, compute t, b1, and b2 using the intersection
      equations. b1 and b2 must be within the range [0, 1], and t must lie
      between r.min_t and r.max_t for a valid intersection. The third
      barycentric coordinate b0 is computed as (1 - b1 - b2). Use the
      barycentric coordinates to interpolate the normal at the intersection
      point and normalize it. Finally, update the intersection attributes with
      t, the normal, the intersected triangle, and get_bsdf().

      <div style="display: flex; flex-direction: column; align-items: center">
        <table
          style="width: 100%; text-align: center; border-collapse: collapse"
        >
          <tr>
            <td style="text-align: center">
              <img src="img/p11.png" width="400px" />
              <figcaption>Caption goes here.</figcaption>
            </td>
            <td style="text-align: center">
              <img src="img/p12.png" width="400px" />
              <figcaption>Caption goes here.</figcaption>
            </td>
          </tr>
          <tr>
            <td style="text-align: center">
              <img src="img/p13.png" width="400px" />
              <figcaption>Caption goes here.</figcaption>
            </td>
            <td style="text-align: center">
              <img src="img/p14.png" width="400px" />
              <figcaption>Caption goes here.</figcaption>
            </td>
          </tr>
        </table>
      </div>

      <h2>Part 2: Bounding Volume Hierarchy</h2>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
      est laborum.

      <h2>Part 3: Direct Illumination</h2>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
      est laborum.

      <h2>Part 4: Global Illumination</h2>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
      est laborum.

      <h2>Part 5: Adaptive Sampling</h2>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
      est laborum.

      <h2>(Optional) Part 6: Extra Credit Opportunities</h2>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
      est laborum.

      <h2>Additional Notes (please remove)</h2>
      <ul>
        <li>
          You can also add code if you'd like as so: <code>code code code</code>
        </li>
        <li>
          If you'd like to add math equations,
          <ul>
            <li>
              You can write inline equations like so: \( a^2 + b^2 = c^2 \)
            </li>
            <li>
              You can write display equations like so: \[ a^2 + b^2 = c^2 \]
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </body>
</html>
